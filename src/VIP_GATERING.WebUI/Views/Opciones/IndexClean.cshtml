@model VIP_GATERING.WebUI.Models.PagedResult<VIP_GATERING.Domain.Entities.Opcion>
@{
    ViewData["Title"] = "Opciones";
}
@section Breadcrumb{<div class="text-sm text-slate-500 mb-4">Inicio / Administración / Opciones</div>}

<div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-semibold">Opciones</h1>
    @if (User.IsInRole("Admin"))
    {
        <a asp-action="Create" class="btn-primary">Nueva opción</a>
    }
 </div>

<form method="get" class="card mb-4 flex items-end gap-2 max-w-xl">
    <input type="text" name="q" value="@ViewBag.Q" placeholder="Buscar por nombre o descripción" class="border rounded p-2 grow"/>
    <button class="btn-outline">Buscar</button>
    <a asp-action="Index" class="btn-outline">Limpiar</a>
</form>

<div class="overflow-x-auto">
    <table class="min-w-full bg-white border rounded">
        <thead class="bg-slate-100">
            <tr>
                <th class="text-left p-2">Código</th>
                <th class="text-left p-2">Nombre</th>
                <th class="text-left p-2">Descripción</th>
                @if (User.IsInRole("Monitor"))
                {
                    <th class="text-left p-2">Precio</th>
                }
                else
                {
                    <th class="text-left p-2">Costo</th>
                }
                <th class="p-2">Acciones</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var o in Model.Items)
        {
            <tr class="border-t">
                <td class="p-2">@o.Codigo</td>
                <td class="p-2">@o.Nombre</td>
                <td class="p-2">@o.Descripcion</td>
                @if (User.IsInRole("Monitor"))
                {
                    <td class="p-2">@(o.Precio.HasValue ? o.Precio.Value.ToString("0.00") : "-")</td>
                }
                else
                {
                    <td class="p-2">@o.Costo.ToString("0.00")</td>
                }
                <td class="p-2 text-right space-x-2">
                    @if (User.IsInRole("Admin"))
                    {
                        <a asp-action="Edit" asp-route-id="@o.Id" class="btn-outline">Editar</a>
                        <form asp-action="Delete" method="post" class="inline">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@o.Id" />
                            <button class="btn-outline text-red-600">Eliminar</button>
                        </form>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>
