@model VIP_GATERING.WebUI.Models.PagedResult<VIP_GATERING.Domain.Entities.Empresa>
@{
    ViewData["Title"] = "Empresas";
}
@section Breadcrumb{<div class="text-sm text-slate-500 mb-4">Inicio / Administracion / Empresas</div>}
<div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-semibold">Empresas</h1>
    @if (User.IsInRole("Admin"))
    {
        <a asp-action="Create" class="btn-primary">Nueva Empresa</a>
    }
</div>

<form method="get" class="card mb-4 flex items-end gap-2 max-w-xl">
    <input type="text" name="q" value="@ViewBag.Q" placeholder="Buscar por nombre o RNC" class="border rounded p-2 grow"/>
    <button class="btn-outline">Buscar</button>
    <a asp-action="Index" class="btn-outline">Limpiar</a>
 </form>
<div class="flex gap-2 mb-4">
    <a class="btn-outline" asp-action="ExportExcel" asp-route-q="@ViewBag.Q">Exportar Excel</a>
    <a class="btn-outline" asp-action="ExportCsv" asp-route-q="@ViewBag.Q">Exportar CSV</a>
    <a class="btn-outline" asp-action="ExportPdf" asp-route-q="@ViewBag.Q">Exportar PDF</a>
</div>

<div class="overflow-x-auto">
    <table class="min-w-full bg-white border rounded">
        <thead class="bg-slate-100">
            <tr>
                <th class="text-left p-2">Nombre</th>
                <th class="text-left p-2">RNC</th>
                <th class="text-left p-2">Contacto</th>
                <th class="text-left p-2">Teléfono</th>
                <th class="text-left p-2">Dirección</th>
                <th class="p-2">Acciones</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var e in Model.Items)
        {
            <tr class="border-t">
                <td class="p-2">@e.Nombre</td>
                <td class="p-2">@e.Rnc</td>
                <td class="p-2">@e.ContactoNombre</td>
                <td class="p-2">@e.ContactoTelefono</td>
                <td class="p-2">@e.Direccion</td>
                <td class="p-2 text-right space-x-2">
                    <a asp-action="Edit" asp-route-id="@e.Id" class="btn-outline">Editar</a>
                    @if (User.IsInRole("Admin"))
                    {
                        <form asp-action="Delete" method="post" class="inline">
                            <input type="hidden" name="id" value="@e.Id" />
                            <button class="btn-outline text-rose-500 border-rose-100 hover:border-rose-300">Eliminar</button>
                        </form>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>

@await Html.PartialAsync("_Pagination", new VIP_GATERING.WebUI.Models.PagedResult<object>{ Items = Model.Items.Cast<object>().ToList(), Page=Model.Page, PageSize=Model.PageSize, TotalItems=Model.TotalItems })

