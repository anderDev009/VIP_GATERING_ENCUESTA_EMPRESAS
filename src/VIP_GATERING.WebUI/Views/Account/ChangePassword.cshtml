@model VIP_GATERING.WebUI.Models.Account.ChangePasswordVM
@{
    ViewData["Title"] = "Cambiar contrasena";
}
<div class="max-w-xl mx-auto bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-200 p-8 mt-6">
    <div class="mb-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Credenciales</p>
        <h1 class="text-2xl font-semibold text-slate-900 mt-1">Cambiar contrasena</h1>
        <p class="text-sm text-slate-500">Activa la nueva politica: minimo 20 caracteres con mayusculas, minusculas, numero y simbolo.</p>
    </div>
    <form asp-action="ChangePassword" method="post" class="space-y-4">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="ReturnUrl" />
        <div>
            <label asp-for="CurrentPassword" class="block text-sm font-semibold text-slate-700">Contrasena actual</label>
            <div class="relative mt-1">
                <input asp-for="CurrentPassword" type="password" class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-100 pr-16" autocomplete="current-password" placeholder="Tu contrasena actual" />
                <button type="button" class="absolute inset-y-0 right-0 px-3 text-xs font-semibold text-slate-500 hover:text-slate-800" data-toggle-password>Mostrar</button>
            </div>
            <span asp-validation-for="CurrentPassword" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="NewPassword" class="block text-sm font-semibold text-slate-700">Nueva contrasena</label>
            <div class="relative mt-1">
                <input asp-for="NewPassword" type="password" class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-100 pr-16" autocomplete="new-password" placeholder="Minimo 20 caracteres seguros" />
                <button type="button" class="absolute inset-y-0 right-0 px-3 text-xs font-semibold text-slate-500 hover:text-slate-800" data-toggle-password>Mostrar</button>
            </div>
            <span asp-validation-for="NewPassword" class="text-red-600 text-sm"></span>
        </div>
        <div>
            <label asp-for="ConfirmPassword" class="block text-sm font-semibold text-slate-700">Confirmar contrasena</label>
            <div class="relative mt-1">
                <input asp-for="ConfirmPassword" type="password" class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-100 pr-16" autocomplete="new-password" placeholder="Repite la nueva contrasena" />
                <button type="button" class="absolute inset-y-0 right-0 px-3 text-xs font-semibold text-slate-500 hover:text-slate-800" data-toggle-password>Mostrar</button>
            </div>
            <span asp-validation-for="ConfirmPassword" class="text-red-600 text-sm"></span>
        </div>
        <div class="text-xs text-slate-500 bg-slate-50 border border-slate-200 rounded-lg p-3">
            Recomendado: activa autenticacion en dos pasos en tu cuenta si esta disponible.
        </div>
        <button class="btn-primary w-full py-3 text-base font-semibold">Guardar</button>
    </form>
</div>
@section Scripts{
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.querySelectorAll('[data-toggle-password]').forEach(function(btn){
            btn.addEventListener('click', function(){
                const input = btn.closest('div').querySelector('input');
                if(!input) return;
                const showing = input.type === 'text';
                input.type = showing ? 'password' : 'text';
                btn.textContent = showing ? 'Mostrar' : 'Ocultar';
            });
        });
    </script>
}
